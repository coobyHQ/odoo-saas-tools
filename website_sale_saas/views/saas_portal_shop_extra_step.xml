<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="extra_step_dbname" inherit_id="website_sale.extra_info">
        <xpath expr="//div[hasclass('oe_cart')]" position="replace">
            <div class="col-12 col-xl order-xl-1 oe_cart">
                <div class="row">
                    <div class="col">
                        <form action="/website_form/" method="post" class="s_website_form container-fluid" enctype="multipart/form-data" data-force_action="shop.sale.order.dbname" data-model_name="sale.order" data-success_page="/shop/payment">
                            <div class="form-group row form-field o_website_form_custom">
                                <!--label for="dbname" class="control-label">Domain:</label-->
                                <table t-if="not instances">
                                    <h2 class="mb8 mt8">Desired web address for your system</h2>
                                    <div class="input-group">
                                        <input type="text" name="dbname" t-att-value="dbname" id="dbname"
                                                class="form-control" placeholder="your-company-name" required="required"/>
                                        <input type="text" name="dbname_base_saas_domain" t-att-value="dbname_base_saas_domain" id="dbname_base_saas_domain"
                                                class="form-control hidden" style="display:none;"/>
                                        <span class="input-group-addon" style="max-width: 150px; overflow-y: hidden; font-size: 20px;">.<t t-raw="base_saas_domain"/></span>
                                    </div>
                                    <br/>
                                    <h3 class="mb8 mt8" style="text-align: center; color: orange;">Your Cooby Instance Size</h3>

                                    <table class="table table-striped table-sm" id="instance_overview">
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <span class="col-xs-6 text-right text-muted">Max. users in plan:</span>
                                                </td>
                                                <td>
                                                    <span class="col-xs-6 text-right-not-xs text-left-xs text-muted">
                                                        <span t-raw="plan and plan['plan_users'] or ''" style="white-space: nowrap;"/>
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span class="col-xs-6 text-right text-muted">Max. storage in plan:</span>
                                                </td>
                                                <td>
                                                    <span class="col-xs-6 text-right-not-xs text-left-xs text-muted">
                                                        <span t-raw="plan and plan['plan_storage'] or ''" style="white-space: nowrap;"/> MB
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span class="col-xs-6 text-right text-muted">Additional users:</span>
                                                </td>
                                                <td>
                                                    <span class="col-xs-6 text-right-not-xs text-left-xs text-muted">
                                                        <span t-raw="plan and plan['additional_users'] or '0'" style="white-space: nowrap;"/>
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span class="col-xs-6 text-right text-muted">Additional storage:</span>
                                                </td>
                                                <td>
                                                    <span class="col-xs-6 text-right-not-xs text-left-xs text-muted">
                                                        <span t-raw="plan and plan['additional_storage'] or '0'" style="white-space: nowrap;"/> MB
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span class="col-xs-6 text-right text-muted">Total max. users:</span>
                                                </td>
                                                <td>
                                                    <span class="col-xs-6 text-right-not-xs text-left-xs text-muted">
                                                        <span t-raw="plan and plan['max_allowed_users'] or ''" style="white-space: nowrap;"/>
                                                    </span>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span class="col-xs-6 text-right text-muted">Total max. storage:</span>
                                                </td>
                                                <td>
                                                    <span class="col-xs-6 text-right-not-xs text-left-xs text-muted">
                                                        <span t-raw="plan and plan['max_allowed_storage'] or ''" style="white-space: nowrap;"/> MB
                                                    </span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                </table>
                                <t t-if="instances">
                                    <h2 class="mb8 mt8">Select Your Instance To Upgrade</h2>
                                    <div class="form-group">
                                        <select name="instance_id" class="form-control instance_id" required="required">
                                            <t t-foreach="instances or []" t-as="instance">
                                                <option t-att-value="instance.id">
                                                    <t t-esc="instance.name" />
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                </t>
                            </div>
                            <div class="form-group row">
                                <div class="col-lg-3 col-md-4">
                                </div>
                                <div class="col-lg-9 col-md-8">
                                    <a role="button" href="/shop/checkout" class="btn btn-secondary mb32 float-left"><span class="fa fa-chevron-left" /> Previous</a>
                                    <a role="button" class="btn btn-primary float-right mb32 o_website_form_send" href="/shop/confirm_order">Next <span class="fa fa-chevron-right" /></a>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </xpath>
    </template>
</odoo>
